
<!DOCTYPE html>
<html>
<head>
<meta charset="utf8">
<style type="text/css">
pre {
  font-family:Courier New;
  font-size:12pt;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  white-space: -webkit-pre-wrap;
  word-wrap: break-word;
}
</style>
<title>worddiff2.sh</title>
</head>
<body>
<pre>
#!/bin/bash
# <span style="font-weight:bold;color:#ff0000;">Naam: worddiff1.sh</span> <span style="font-weight:bold;color:#00ff00;">Name: worddiff2.sh</span>
# <span style="font-weight:bold;color:#ff0000;">Bron:</span> <span style="font-weight:bold;color:#00ff00;">Author:</span> Rob Toscani
# <span style="font-weight:bold;color:#ff0000;">Datum: 08-12-2025
# Dit programma doet een woord-voor-woord vergelijking in kleur tussen de
# genummerde platte tekstbestanden in de 1ste opgegeven directory en die
# in de 2de opgegeven directory. Het</span> <span style="font-weight:bold;color:#00ff00;">Date: 8th December 2025
# Description: This program</span> is <span style="font-weight:bold;color:#ff0000;">een</span> <span style="font-weight:bold;color:#00ff00;">a</span> wrapper-script <span style="font-weight:bold;color:#ff0000;">rondom 'wdiff'.</span> <span style="font-weight:bold;color:#00ff00;">around 'wdiff()'</span>
# <span style="font-weight:bold;color:#00ff00;">(https://www.gnu.org/software/wdiff/)</span>
# <span style="font-weight:bold;color:#ff0000;">Het nummer in de bestandsnaam bepaalt welke bestanden onderling worden
# vergeleken. De resultaten worden weggeschreven naar kleur-gemarkeerde
# verschil-bestanden in .html- of (optioneel) .pdf-formaat, verzameld</span> <span style="font-weight:bold;color:#00ff00;">It does a word-by-word comparison</span> in
<span style="font-weight:bold;color:#ff0000;"># directory ./diff/.
#
# Vooraf moeten de volgende programma's op het systeem zijn geïnstalleerd:
# - wdiff
# - ansifilter
# - wkhtmltopdf (indien optie -p gewenst is)
#
# Zie ook:
# https://unix.stackexchange.com/questions/25199/how-can-i-get-the-most-bang-for-my-buck-with-the-diff-command
#
#######################################################
#
#
# HOE DIT PROGRAMMA TE GEBRUIKEN:
#
# 1. Voorbereiding:
# =================
#
# Maak van te voren twee mappen onder de projectmap aan, hier verder aangeduid
# als &lt;MAP1&gt; en &lt;MAP2&gt;.
#
# Als "oude" met "nieuwe" teksten moeten worden vergeleken, dan kan de naam
# van &lt;MAP1&gt; bijvoorbeeld zijn 'oud', en die van &lt;MAP2&gt; 'nieuw'.
#
# Leid nu platte tekstbestanden af van de te vergelijken bronteksten, bij
# voorkeur één bestand per hoofdstuk</span> <span style="font-weight:bold;color:#00ff00;">color among each pair</span> of <span style="font-weight:bold;color:#ff0000;">artikel.
#
# B.v. tekst van een InDesign-artikel selecteren met 'Ctrl-A', kopiëren met
# 'Ctrl-C' en in een platte editor plakken met 'Ctrl-V'.
#
# Sla deze platte tekstbestanden zodanig op in &lt;MAP1&gt; en &lt;MAP2&gt; dat voor elk bestand
# in &lt;MAP1&gt; er een daarmee te vergelijken bestand bestaat in &lt;MAP2&gt;.
#
# Om twee bestanden in verschillende mappen aan elkaar te kunnen relateren moeten
# hun bestandsnamen beginnen met hetzelfde &lt;NUMMER&gt; gevolgd door een &lt;UNDERSCORE&gt;,
# eventueel gevolgd door een vrij te kiezen gedeelte (dat onderling verschillend
# mag zijn).
#
# Als b.v. in &lt;MAP1&gt; (b.v. genaamd 'oud') de volgende bestanden zijn weggeschreven:
# - '1_voorwoord.txt'
# - '2_highlights.txt'</span> <span style="font-weight:bold;color:#00ff00;">equally</span>
# <span style="font-weight:bold;color:#ff0000;">- '3_tips.txt'
#
# En</span> <span style="font-weight:bold;color:#00ff00;">numbered flat-text files shared by the two given directories.
# The results are stored to color-marked difference-files</span> in <span style="font-weight:bold;color:#ff0000;">&lt;MAP2&gt; (b.v. genaamd 'nieuw') de volgende bestanden:
# - '1_inleiding.txt'
# - '2_highlights.txt'
# - '3_tips&tricks.txt'
#</span> <span style="font-weight:bold;color:#00ff00;">html-, or</span>
# <span style="font-weight:bold;color:#ff0000;">Dan zal programma de tekstbestanden</span> <span style="font-weight:bold;color:#00ff00;">(optionally) pdf-format, and collected</span> in <span style="font-weight:bold;color:#ff0000;">&lt;MAP1&gt; met die in &lt;MAP2&gt; vergelijken
# waarvan de naam met hetzelfde &lt;NUMMER&gt; begint.</span> <span style="font-weight:bold;color:#00ff00;">the ./diff/ directory.</span>
#
# <span style="font-weight:bold;color:#ff0000;">Dus hier:</span> <span style="font-weight:bold;color:#00ff00;">Usage:     worddiff2.sh  [OPTION]... DIR1 DIR2</span>
#    <span style="font-weight:bold;color:#ff0000;">'1_voorwoord.txt'   met  '1_inleiding.txt'</span>
#    <span style="font-weight:bold;color:#ff0000;">'2_highlights.txt'  met  '2_highlights.txt'</span> <span style="font-weight:bold;color:#00ff00;">Options:</span>
#    <span style="font-weight:bold;color:#ff0000;">'3_tips.txt'        met  '3_tips&tricks.txt'</span>   <span style="font-weight:bold;color:#00ff00;">-h       Help (this output)</span>
#   <span style="font-weight:bold;color:#00ff00;">-p       Output as .pdf- instead of .html-files</span>
# <span style="font-weight:bold;color:#ff0000;">Let op:</span>
# <span style="font-weight:bold;color:#ff0000;">- Het aantal genummerde bestanden in &lt;MAP1&gt; moet gelijk zijn aan dat in &lt;MAP2&gt;.</span> <span style="font-weight:bold;color:#00ff00;">Prerequisites:</span>
# - <span style="font-weight:bold;color:#ff0000;">Per map mag elke waarde van &lt;NUMMER&gt; maar één keer voorkomen.</span> <span style="font-weight:bold;color:#00ff00;">wdiff</span>
# - <span style="font-weight:bold;color:#ff0000;">In bestandsnamen mogen na de '_' spaties voorkomen, maar vermijd het bij voorkeur.
#
#
# 2. Werking van het programma:
# =============================
#
# Om het programma te starten, typ in een terminal het volgende commando in,
# en druk daarna op &lt;ENTER&gt;:
#
#     worddiff1.sh &lt;bestandspad_naar_MAP1&gt; &lt;bestandspad_naar_MAP2&gt;
#
# Als &lt;MAP1&gt; overeenkomt met 'oud', dan wordt deze dus als eerste opgegeven.
#
# Met optie -w (gevolgd door aantal woorden per regel) kan de regel-afbreking
# in de te leveren</span> <span style="font-weight:bold;color:#00ff00;">wkhtmltopdf (if</span> output <span style="font-weight:bold;color:#ff0000;">worden beïnvloed.
#
# Het programma werkt nu één-voor-één alle paren van tekstbestanden in genoemde
# mappen af en genereert hieruit verschil-bestanden.
#
# Deze worden elk als apart .html-bestand in de map './diff/' geplaatst, met als
# bestandsnaam: '&lt;DATUM&gt;_&lt;TIJD&gt;_diff_&lt;NUMMER&gt;.html'.
#
# Het &lt;NUMMER&gt; komt overeen met het &lt;NUMMER&gt; in de namen van de vergeleken
# tekstbestanden.
#
# Indien het programma doublures en/of in één map ontbrekende waarden van &lt;NUMMER&gt;
# tegenkomt, dan geeft het daarvan waarschuwingen in de terminal, maar vervolgt wel
# zo goed mogelijk zijn taak.
#
# Zodra het programma klaar is, geeft het hiervan een melding in dezelfde terminal.</span> <span style="font-weight:bold;color:#00ff00;">to pdf is desired)</span>
#
<span style="font-weight:bold;color:#00ff00;">#####################################################################################</span>
# <span style="font-weight:bold;color:#ff0000;">In elk van de resulterende .html-bestanden in de map './diff/' is:</span>
# <span style="font-weight:bold;color:#ff0000;">- Zwarte tekst: WEL aanwezig in BEIDE vergeleken tekstbestanden in &lt;MAP1&gt; en &lt;MAP2&gt;</span> <span style="font-weight:bold;color:#00ff00;">Copyright (C) 2025 Rob Toscani &lt;rob_toscani@yahoo.com&gt;</span>
#
# <span style="font-weight:bold;color:#ff0000;">- Rode tekst:   WEL aanwezig in het tekstbestand in &lt;MAP1&gt; ('oud');</span> <span style="font-weight:bold;color:#00ff00;">worddiff2.sh is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by</span>
#                 <span style="font-weight:bold;color:#ff0000;">NIET in het vergeleken tekstbestand in &lt;MAP2&gt; ('nieuw')</span> <span style="font-weight:bold;color:#00ff00;">the Free Software Foundation, either version 3 of the License, or</span>
# <span style="font-weight:bold;color:#00ff00;">(at your option) any later version.</span>
# <span style="font-weight:bold;color:#ff0000;">- Groene tekst: NIET aanwezig in het tekstbestand in &lt;MAP1&gt; ('oud');</span>
#                 <span style="font-weight:bold;color:#ff0000;">WEL in het vergeleken tekstbestand</span> <span style="font-weight:bold;color:#00ff00;">worddiff2.sh is distributed</span> in <span style="font-weight:bold;color:#ff0000;">&lt;MAP2&gt; ('nieuw')</span> <span style="font-weight:bold;color:#00ff00;">the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
# <span style="font-weight:bold;color:#00ff00;">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
# <span style="font-weight:bold;color:#ff0000;">Vanuit elk van deze html-bestanden kan b.v. geprint worden naar pdf.
# Optie -p resulteert rechtstreeks in een (reeks) .pdf- i.p.v. .html-bestand(en).</span>
<span style="font-weight:bold;color:#00ff00;">######################################################################################</span>

# <span style="font-weight:bold;color:#00ff00;">Standard output-format:
format="html"</span>

#
<span style="font-weight:bold;color:#ff0000;">#######################################################</span> <span style="font-weight:bold;color:#00ff00;">The html-tags to be pasted underneath the text:
html_coda="
&lt;/pre&gt;
&lt;/body&gt;
&lt;/html&gt;"

# The color markings:
delete_start="&lt;span style=\"font-weight:bold;color:#ff0000;\"&gt;"
insert_start="&lt;span style=\"font-weight:bold;color:#00ff00;\"&gt;"
end="&lt;/span&gt;"

# Escape &lt; and &gt; to prevent interpretation as html-syntax (tags):
esc_html="s/&lt;/\&lt;/g; s/&gt;/\&gt;/g"</span> 


# <span style="font-weight:bold;color:#ff0000;">Standaard aantal woorden tot regel-afbreking:
wordcount=10</span> <span style="font-weight:bold;color:#00ff00;">Functions:</span>
# <span style="font-weight:bold;color:#ff0000;">Standaard output-formaat:
format="html"</span> <span style="font-weight:bold;color:#00ff00;">==========</span>

options(){
# Specify options:
    while getopts <span style="font-weight:bold;color:#ff0000;">"hpw:"</span> <span style="font-weight:bold;color:#00ff00;">"hp"</span> OPTION; do
        case $OPTION in
            h) helptext
               exit 0
               ;;
            p) format="pdf"
               ;;
            <span style="font-weight:bold;color:#ff0000;">w) if grep -q [^0-9] &lt;&lt;&lt; "$OPTARG"; then
                   echo "Invalid option argument to -w"
                   exit 1
               fi
               (( OPTARG &gt; 0 )) && wordcount=$OPTARG || wordcount=30000
               ;;</span>
            *) helptext
               exit 1
               ;;
        esac
    done
}

helptext()
# Text printed if -h option (help) or a non-existent option has been given:
{
    while read "line"; do
        echo "$line" &gt;&2         # print to standard error (stderr)
    done &lt;&lt; EOF
Usage: <span style="font-weight:bold;color:#ff0000;">worddiff1.sh [-hpw NUM]</span> <span style="font-weight:bold;color:#00ff00;">worddiff2.sh [-hp]</span> directory1 directory2

-h       Help (this output)
-p       Output as .pdf- instead of .html-files
<span style="font-weight:bold;color:#ff0000;">-w NUM   Wrap lines after each series of NUM words instead of 10. NUM = 0 disables line-wrap.</span>
EOF
}

numberlist()
# <span style="font-weight:bold;color:#ff0000;">Een (horizontale) lijst printen van nummers waarmee de bestanden</span> <span style="font-weight:bold;color:#00ff00;">Print a ('horizontal') list of the leading numbers in the file names</span> in <span style="font-weight:bold;color:#ff0000;">de gegeven map beginnen:</span> <span style="font-weight:bold;color:#00ff00;">given directory:</span>
{
    ls "$1"           |
    grep -oE ^[0-9]+_ |
    tr '_' ' '        |
    sort -n           |
    tr -d '\n'        |
    sed 's/ $//'
}

checkrepeat()
# <span style="font-weight:bold;color:#ff0000;">Eventuele herhalingen</span> <span style="font-weight:bold;color:#00ff00;">Detect any repetitions</span> in <span style="font-weight:bold;color:#ff0000;">een gesorteerde nummerlijst signaleren en hiervan een melding maken:</span> <span style="font-weight:bold;color:#00ff00;">a sorted number list, and issue a warning if found:</span>
{
    repeatnum="$(grep -oE "(\&lt;[0-9]+\&gt;) \1" &lt;&lt;&lt; "$1")"
    if [[ -n "$repeatnum" ]]; then
        qty=$(wc -w &lt;&lt;&lt; "$repeatnum")
        num=${repeatnum/ */}
        echo <span style="font-weight:bold;color:#ff0000;">"Waarschuwing: nummer</span> <span style="font-weight:bold;color:#00ff00;">"Warning: number</span> $num <span style="font-weight:bold;color:#ff0000;">KOMT $qty KEER voor</span> <span style="font-weight:bold;color:#00ff00;">appears</span> in <span style="font-weight:bold;color:#ff0000;">bestandsnamen</span> <span style="font-weight:bold;color:#00ff00;">$qty file-names</span> in <span style="font-weight:bold;color:#ff0000;">de</span> <span style="font-weight:bold;color:#00ff00;">the</span> $2."
        echo <span style="font-weight:bold;color:#ff0000;">"SLECHTS ÉÉN BESTAND met</span> <span style="font-weight:bold;color:#00ff00;">"Only one file with</span> $num <span style="font-weight:bold;color:#ff0000;">is vergeleken met een (MOGELIJK VERKEERD) bestand</span> <span style="font-weight:bold;color:#00ff00;">was compared with a (possibly wrong) file</span> in <span style="font-weight:bold;color:#ff0000;">de $3"</span> <span style="font-weight:bold;color:#00ff00;">the $3."</span>
    fi
}

makediff()
# <span style="font-weight:bold;color:#ff0000;">Alle genummerde tekstbestanden</span> <span style="font-weight:bold;color:#00ff00;">Compare all numbered text files</span> in <span style="font-weight:bold;color:#ff0000;">&lt;MAP1&gt; met die</span> <span style="font-weight:bold;color:#00ff00;">1st directory with those</span> in <span style="font-weight:bold;color:#ff0000;">&lt;MAP2&gt; vergelijken en de output opslaan:</span> <span style="font-weight:bold;color:#00ff00;">2nd directory, and store output:</span>
{
    <span style="font-weight:bold;color:#ff0000;">NUMMER=$1</span>
    <span style="font-weight:bold;color:#00ff00;">NUMBER=$1</span>
    file1="$(ls <span style="font-weight:bold;color:#ff0000;">$2/$NUMMER"_"*</span> <span style="font-weight:bold;color:#00ff00;">$2/$NUMBER"_"*</span> 2&gt;/dev/null | head -n 1)"
    file2="$(ls <span style="font-weight:bold;color:#ff0000;">$3/$NUMMER"_"*</span> <span style="font-weight:bold;color:#00ff00;">$3/$NUMBER"_"*</span> 2&gt;/dev/null | head -n 1)"

# <span style="font-weight:bold;color:#ff0000;">Niets doen als een nummer niet voorkomt, met waarschuwing als dat</span> <span style="font-weight:bold;color:#00ff00;">The html-tags to be pasted above the text:
    html_intro="
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset=\"utf8\"&gt;
&lt;style type=\"text/css\"&gt;
pre {
  font-family:Courier New;
  font-size:12pt;
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  white-space: -pre-wrap;
  white-space: -o-pre-wrap;
  white-space: -webkit-pre-wrap;
  word-wrap: break-word;
}
&lt;/style&gt;
&lt;title&gt;$file2&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;pre&gt;"

    # Do nothing if a number is missing. and issue warning if appearing</span> in <span style="font-weight:bold;color:#ff0000;">1 van de 2 directories is:</span> <span style="font-weight:bold;color:#00ff00;">one directory only:</span>
    if ([[ -z "$file1" ]] || [[ -z "$file2" ]]); then
        if [[ -n "$file1" ]]; then
            echo <span style="font-weight:bold;color:#ff0000;">"Waarschuwing:</span> <span style="font-weight:bold;color:#00ff00;">"Warning:</span> nummer <span style="font-weight:bold;color:#ff0000;">$NUMMER KOMT WEL voor</span> <span style="font-weight:bold;color:#00ff00;">$NUMBER appears</span> in <span style="font-weight:bold;color:#ff0000;">de 1e map, MAAR NIET</span> <span style="font-weight:bold;color:#00ff00;">1st directory only, not</span> in <span style="font-weight:bold;color:#ff0000;">de 2e map."</span> <span style="font-weight:bold;color:#00ff00;">2nd directory."</span>
        elif [[ -n "$file2" ]]; then
            echo <span style="font-weight:bold;color:#ff0000;">"Waarschuwing:</span> <span style="font-weight:bold;color:#00ff00;">"Warning:</span> nummer <span style="font-weight:bold;color:#ff0000;">$NUMMER KOMT WEL voor</span> <span style="font-weight:bold;color:#00ff00;">$NUMBER appears</span> in <span style="font-weight:bold;color:#ff0000;">de 2e map, MAAR NIET</span> <span style="font-weight:bold;color:#00ff00;">2nd directory only, not</span> in <span style="font-weight:bold;color:#ff0000;">de 1e map."</span> <span style="font-weight:bold;color:#00ff00;">1st directory."</span>
        fi
        return
    fi

    # <span style="font-weight:bold;color:#ff0000;">De kleuren-diff maken:</span> <span style="font-weight:bold;color:#00ff00;">Generate the color-marked difference-file:</span>
    wdiff -w <span style="font-weight:bold;color:#ff0000;">"$(tput bold;tput setaf 1)"</span> <span style="font-weight:bold;color:#00ff00;">"$delete_start"</span> -x <span style="font-weight:bold;color:#ff0000;">"$(tput sgr0)"</span> <span style="font-weight:bold;color:#00ff00;">"$end"</span> -y <span style="font-weight:bold;color:#ff0000;">"$(tput bold;tput setaf 2)"</span> <span style="font-weight:bold;color:#00ff00;">"$insert_start"</span> -z <span style="font-weight:bold;color:#ff0000;">"$(tput sgr0)"</span> <span style="font-weight:bold;color:#00ff00;">"$end"</span> \
              &lt;(sed <span style="font-weight:bold;color:#ff0000;">"$regexstring"</span> <span style="font-weight:bold;color:#00ff00;">"$esc_html"</span> "$file1") &lt;(sed <span style="font-weight:bold;color:#ff0000;">"$regexstring"</span> <span style="font-weight:bold;color:#00ff00;">"$esc_html"</span> "$file2") |

    # <span style="font-weight:bold;color:#ff0000;">En deze omzetten naar HTML-formaat:
    ansifilter -H --encoding=utf8           |

    # Alle eventuele niet-utf-8 karakters eruit verwijderen:
    iconv -f utf-8 -t utf-8 -c              |

    # Tijdelijk spatie verwijderen uit '&lt;span style=xxx&gt;'-tag (i.v.m regel-afbreking):
    sed 's/&lt;span style=/&lt;span_style=/g'     |

    # Alle regels afbreken bij spatie of tab na elke serie woorden met aantal = 'wordcount'
    # (Dit doet ansifilter helaas niet zelf, ook niet met optie -w !):
    sed -E "s/(([^ 	]+[ 	]+){$wordcount})/\1\n/g" |

    # Spatie in '&lt;span style=xxx&gt;'-tag herstellen, en output wegschrijven naar gewenst formaat:
    sed 's/&lt;span_style=/&lt;span style=/g'</span> <span style="font-weight:bold;color:#00ff00;">And save results in desired format (default .html):
    cat &lt;(echo "$html_intro") - &lt;(echo "$html_coda")</span> | store2file - <span style="font-weight:bold;color:#ff0000;">$NUMMER</span> <span style="font-weight:bold;color:#00ff00;">$NUMBER</span>
}

store2file()
# <span style="font-weight:bold;color:#ff0000;">Html-tekst wegschrijven naar</span> <span style="font-weight:bold;color:#00ff00;">Store html-text to</span> (html-)file, <span style="font-weight:bold;color:#ff0000;">of (in geval van optie -p) omzetten naar</span> <span style="font-weight:bold;color:#00ff00;">or (if option -p is given) convert to</span> pdf-file:
{
    file="$1"
    <span style="font-weight:bold;color:#ff0000;">NUMMER="$2"</span>
    <span style="font-weight:bold;color:#00ff00;">NUMBER="$2"</span>
    if [[ $format == "html" ]]; then
        cat "$file" &gt;| ./diff/"$(date <span style="font-weight:bold;color:#ff0000;">+"%Y%m%d_%H%M")_diff_$NUMMER.html"</span> <span style="font-weight:bold;color:#00ff00;">+"%Y%m%d_%H%M")_diff_$NUMBER.html"</span>
    else
        wkhtmltopdf "$file" ./diff/"$(date <span style="font-weight:bold;color:#ff0000;">+"%Y%m%d_%H%M")_diff_$NUMMER.pdf"</span> <span style="font-weight:bold;color:#00ff00;">+"%Y%m%d_%H%M")_diff_$NUMBER.pdf"</span> 2&gt;/dev/null
    fi
}


# <span style="font-weight:bold;color:#ff0000;">Voer de opties uit:</span> <span style="font-weight:bold;color:#00ff00;">Main function:
# ==============

# Execute the options:</span>
options $@
shift $(( OPTIND - 1 ))

# <span style="font-weight:bold;color:#ff0000;">Vervang karakters die kwetsbaar zijn voor een mogelijke bug in ansifilter():
regexstring="s/ß/ss/g; s/ß/ss/g"

#</span> Check <span style="font-weight:bold;color:#ff0000;">of de twee opgegeven mappen bestaan:</span> <span style="font-weight:bold;color:#00ff00;">if given directories exist:</span>
([[ ! -d "$1" ]] || [[ ! -d "$2" ]]) && echo <span style="font-weight:bold;color:#ff0000;">"Geef bestaande mappen op."</span> <span style="font-weight:bold;color:#00ff00;">"Specify existing directories."</span> && exit 1

# <span style="font-weight:bold;color:#ff0000;">Maak de ./diff/-directory aan, tenzij deze al bestaat:</span> <span style="font-weight:bold;color:#00ff00;">Create the ./diff/-directory, unless it already exists:</span>
[[ ! -d ./diff ]] && mkdir ./diff

# <span style="font-weight:bold;color:#ff0000;">Maak twee lijsten: een met alle waarden van &lt;NUMMER&gt; in &lt;MAP1&gt; en een met alle in &lt;MAP2&gt;:</span> <span style="font-weight:bold;color:#00ff00;">Create a list with all &lt;NUMBER&gt; values for each if the two directories:</span>
list1="$(numberlist "$1")"
list2="$(numberlist "$2")"

# Check <span style="font-weight:bold;color:#ff0000;">of</span> <span style="font-weight:bold;color:#00ff00;">if</span> de <span style="font-weight:bold;color:#ff0000;">&lt;NUMMER&gt;-lijsten herhalingen bevatten en zo ja geef hiervan een melding:</span> <span style="font-weight:bold;color:#00ff00;">&lt;NUMBER&gt;-lists contain repetitions, and if so issue a warning:</span>
checkrepeat "$list1" <span style="font-weight:bold;color:#ff0000;">"1e map" "2e map"</span> <span style="font-weight:bold;color:#00ff00;">"1st directory" "2nd directory"</span>
checkrepeat "$list2" <span style="font-weight:bold;color:#ff0000;">"2e map" "1e map"

# Stel vast wat de maximaal voorkomende waarde van &lt;NUMMER&gt; is</span> <span style="font-weight:bold;color:#00ff00;">"2nd directory" "1st directory"

# Determine the maximum &lt;NUMBER&gt; value appearing</span> in <span style="font-weight:bold;color:#ff0000;">beide gesorteerde lijsten:</span> <span style="font-weight:bold;color:#00ff00;">any of the sorted lists:</span>
max1=${list1/* /}
max2=${list2/* /}
(( max1 &gt; max2 )) && max=$max1 || max=$max2

# <span style="font-weight:bold;color:#ff0000;">Doorloop alle waarden van &lt;NUMMER&gt; en roep per waarde de functie</span> <span style="font-weight:bold;color:#00ff00;">While incrementing to max &lt;NUMBER&gt; value, call</span> makediff() <span style="font-weight:bold;color:#ff0000;">aan:
NUMMER=0</span> <span style="font-weight:bold;color:#00ff00;">function with value argument:
NUMBER=0</span>
while (( <span style="font-weight:bold;color:#ff0000;">NUMMER</span> <span style="font-weight:bold;color:#00ff00;">NUMBER</span> &lt;= max )); do
    makediff <span style="font-weight:bold;color:#ff0000;">$NUMMER</span> <span style="font-weight:bold;color:#00ff00;">$NUMBER</span> "$1" "$2"
    (( <span style="font-weight:bold;color:#ff0000;">NUMMER</span> <span style="font-weight:bold;color:#00ff00;">NUMBER</span> += 1 ))
done

# Afsluiting:
echo <span style="font-weight:bold;color:#ff0000;">"Klaar!</span> <span style="font-weight:bold;color:#00ff00;">"Ready!</span> - <span style="font-weight:bold;color:#ff0000;">De verschilbestanden zijn verzameld</span> <span style="font-weight:bold;color:#00ff00;">Please find all difference-files</span> in $(pwd)/diff/"

</pre>
</body>
</html>
